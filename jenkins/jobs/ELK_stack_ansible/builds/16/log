Started by GitHub push by Papekhaly
Obtained Jenkinsfile from git https://github.com/Papekhaly/Automation_challenge.git
Running in Durability level: MAX_SURVIVABILITY
[8mha:////4JZNqShFzaLY3SoGKznJbObyHD/fYnaCPEsdlXIfbjWAAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4IHRDnmPor0//xBD2lugh6uuaCO2A/8QNgllM8V7cvPtAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] node
Running on [8mha:////4AQ1YFno9BSYotGtAvFfdIR3lo5sMH4NOewbourH4MxsAAAAnh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAz2EgZh/eT83ILSktQifY3cxGIgrakPAHib2iPIAAAA[0mJenkins in /var/jenkins_home/workspace/ELK_stack_ansible
[8mha:////4ItQb7s8Xf4KqtoOvyzLApQ8N4Xyyga7XzxPM4OmDb3NAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4FeRvkIC+EVDJpLfIOWcHImD6g8kVDz1E0mjnDFpot1dAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gQkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jc09154wAAAAA==[0m[Pipeline] stage
[8mha:////4KXbE8jHfa9IlNPOU5AIZoP6Fiz5slKjeWT6Lwjgj0EdAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0ggUxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jek7ggRwAAAAA==[0m[Pipeline] { (Git)
[8mha:////4LQKmRLFDPWaqCTzEdmFJnuEju2KRPjcvXpNoDqYdeUIAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaWGsbAmNJ0AWEZb8zwLrbuWJvJp3kLiJlZNMMm+a93rDOic4UbLcG+wdZu14DKOti0+U+lugiXu6ck2YKRguzSSpM+cFJRUDS1gDKwEbgzpQdmgLbIVXD9UGhba9lFS/o4DGdQM8gYlqLiqVL8wJdvexy4Q/z18BzLEA29ce4gfg7KmOvAAAAA==[0m[Pipeline] echo
> Checking out the Git version control ...
[8mha:////4B8H6hlRCmWZBKLZ9vgkgjQlJsO+f77QzNFhIhpOsAiBAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbGRNjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI4F2L72ED8v8DEJvAAAAA==[0m[Pipeline] checkout
The recommended git tool is: git
using credential github
 > git rev-parse --resolve-git-dir /var/jenkins_home/workspace/ELK_stack_ansible/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Papekhaly/Automation_challenge.git # timeout=10
Fetching upstream changes from https://github.com/Papekhaly/Automation_challenge.git
 > git --version # timeout=10
 > git --version # 'git version 2.30.2'
using GIT_ASKPASS to set credentials github repository
 > git fetch --tags --force --progress -- https://github.com/Papekhaly/Automation_challenge.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision 9daaa46ca2ca600d0ba65d731f2aba2f8f669d8d (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 9daaa46ca2ca600d0ba65d731f2aba2f8f669d8d # timeout=10
Commit message: "ansible"
 > git rev-list --no-walk 288e76ba98bd0a3f264d8edc15b2cf9565f40325 # timeout=10
[8mha:////4OhLOUHRVSecGBcbcf1gbUsYDtkRPdXPLFQVdl3j2rOUAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbmRhjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI6xADvU7j/zqggXvAAAAA==[0m[Pipeline] }
[8mha:////4KuS49ahqzNMZ1imjZ+urz+QBTinhD3Qw/SaGi3DofavAAAAox+LCAAAAAAAAP9tjTESgjAQRT84FraWHiJoYeVY2WZoPEGEGAOZXUwWofJEXs07yMiMlb/67zXv9cYyRRw5OtVYaj2lyqsu9G56auDYXgMPquGLqpgSB6tKO5Rc29OMJYvFvCzHQmNlqQqcPDnBWjfmYYpgyBVniZM7aOS+vuOJTE9lMVG+MEZsbn2dmH6dvwGMXSfId1tBtv8AExtCpb0AAAA=[0m[Pipeline] // stage
[8mha:////4NLMY3J2VUJIbXOc3kQIaYL9vFi91cBKC5nIBiO1YVO1AAAAph+LCAAAAAAAAP9tjTEOwjAQBC9BKWgpeYSjSHSIitZywwtMbIwT6y7YF5KKF/E1/oAhEhVb7ay0mucLqhThQNGJzmLvMbVeDGF0uYmJYn8JNImOzqIlTBSsUHZSZOxxQUVsYUlRwkrC2mIbKHl0DBvZ6buug0ZXnzjmbS+h9OYGDyhkNrOO/IU5wvY6mkT48/wVwDwwFDuGsmk+x+oNEzd2msEAAAA=[0m[Pipeline] stage
[8mha:////4K80uwNWtLPnqToi2PsOPQJjVUR713fIrJqWN+nNXF47AAAAph+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohUZUVMrFEWThCaEJJG/7dJSjpxIq7GHWipxIQHy7ZkvdcbqhjgRMEwp7GzGFvLej+aObFMobt5yszRlbWEkbxmQmdBSp/XKihpWFWUsOGw1dh6ihZNgh138iFrL9HUlxTm7cihtGqAJxR8JicZ0rdMAfb3UUXCH+cvAKY+Qdk0ix2WZ/UBbwyqm8IAAAA=[0m[Pipeline] { (Deploy)
[8mha:////4EcGKeiJLAxG+2U/KAUQ5VnscD+ZJCFjE0Ur7ZnaRW5MAAAAox+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIioERUaS03vMDExjix7oztkFS8iK/xBwKRqNhitbPNPF+wTBGOHC22hjpHqXEYfG+nhQPH7uJ5wJbP2DAl9galGSRrU88oORuYU5SwELAy1HhOjmyGtWjVXVVeka1OOU7fQUDp9A0eUIjJnFXMXxgjbK69Tkw/z18BjCFDud19ah/eeSmYHb4AAAA=[0m[Pipeline] echo
> Deploying the application ...
[8mha:////4FB2tdY/8bcJ4ciwdq0RG94V1Pn9b5/i0wxCPXcCeOH4AAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiEB2iSmu54QUmNsaJdWdsh6TiRXyNPxCIRMUWq51t5vmCZYpw5GixNdQ5So3D4Hs7LRw4dhfPA7Z8xoYpsTcozSBZm3pGydnAnKKEhYCVocZzcmQzrEWr7qryimx1ynH6DgJKp2/wgEJM5qxi/sIYYXPtdWL6ef4KYAwZyu3uU/vwBr6/2VK+AAAA[0m[Pipeline] ansiblePlaybook
[ELK_stack_ansible] $ ansible-playbook elk.yml -i inventory

PLAY [local] *******************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution debian 11 on host localhost should use 
/usr/bin/python3, but is using /usr/bin/python for backward compatibility with 
prior Ansible releases. A future Ansible release will default to using the 
discovered platform python for this host. See https://docs.ansible.com/ansible/
2.10/reference_appendices/interpreter_discovery.html for more information. This
 feature will be removed in version 2.12. Deprecation warnings can be disabled 
by setting deprecation_warnings=False in ansible.cfg.
ok: [localhost]

TASK [docker : Ensure docker deamon is running] ********************************
changed: [localhost]

TASK [docker : Create docker network] ******************************************
ok: [localhost]

TASK [elasticsearch : Create elastic search volume] ****************************
ok: [localhost]

TASK [elasticsearch : Start elastic search container] **************************
[DEPRECATION WARNING]: The container_default_behavior option will change its 
default value from "compatibility" to "no_defaults" in community.general 3.0.0.
 To remove this warning, please specify an explicit value for it now. This 
feature will be removed from community.general in version 3.0.0. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
[DEPRECATION WARNING]: Please note that docker_container handles networks 
slightly different than docker CLI. If you specify networks, the default 
network will still be attached as the first network. (You can specify 
purge_networks to remove all networks not explicitly listed.) This behavior 
will change in community.general 2.0.0. You can change the behavior now by 
setting the new `networks_cli_compatible` option to `yes`, and remove this 
warning by setting it to `no`. This feature will be removed from 
community.general in version 2.0.0. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
ok: [localhost]

TASK [elasticsearch : debug] ***************************************************
ok: [localhost] => {
    "msg": "Users have to be configured manually. Enable and set the password for the default users with: `docker exec -it elasticsearch01 /bin/bash -c \"elasticsearch-setup-passwords auto\"` Then edit the `vaul.yml` file and copy the password values to the expected variable.\n"
}

TASK [kibana : Start kibana container] *****************************************
ok: [localhost]

TASK [logstash : Create logstash volume] ***************************************
ok: [localhost]

TASK [logstash : Ensure logstash pipeline conf dir exists] *********************
ok: [localhost]

TASK [logstash : Copy logstash pipeline conf] **********************************
ok: [localhost] => (item={'src': 'templates/syslog.conf', 'dest': '//usr/share/logstash/pipeline/syslog.conf'})
ok: [localhost] => (item={'src': 'templates/beats.conf', 'dest': '//usr/share/logstash/pipeline/beats.conf'})

TASK [logstash : Start logstash container] *************************************
changed: [localhost]

TASK [heartbeat : Create heartbeat search volume] ******************************
ok: [localhost]

TASK [heartbeat : Ensure heartbeat conf dir exists] ****************************
ok: [localhost]

TASK [heartbeat : Copy heartbeat conf] *****************************************
ok: [localhost] => (item={'src': 'templates/heartbeat.yml', 'dest': '/usr/share/heartbeat/heartbeat.yml'})

TASK [heartbeat : Check heartbeat template] ************************************
ok: [localhost]

TASK [heartbeat : Get infos on container] **************************************
ok: [localhost]

TASK [heartbeat : Wait for elasticsearch container] ****************************
skipping: [localhost]

TASK [heartbeat : Load heartbeat template] *************************************
skipping: [localhost]

TASK [heartbeat : Start heartbeat container] ***********************************
fatal: [localhost]: FAILED! => {"changed": false, "msg": "Error starting container 8c84baa19a82b26e50c6eaa7de212c77da31f936c96f090c75daa7a65b13317c: 400 Client Error for http+docker://localhost/v1.40/containers/8c84baa19a82b26e50c6eaa7de212c77da31f936c96f090c75daa7a65b13317c/start: Bad Request (\"OCI runtime create failed: container_linux.go:370: starting container process caused: process_linux.go:459: container init caused: rootfs_linux.go:59: mounting \"/usr/share/heartbeat/heartbeat.yml\" to rootfs at \"/var/lib/docker/overlay2/f76072bd022589074cae19266e79d7879c9b0870853baa42735bf08254c5abfb/merged/usr/share/heartbeat/heartbeat.yml\" caused: not a directory: unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type\")"}

PLAY RECAP *********************************************************************
localhost                  : ok=16   changed=2    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   

FATAL: command execution failed
hudson.AbortException: Ansible playbook execution failed
	at org.jenkinsci.plugins.ansible.AnsiblePlaybookBuilder.perform(AnsiblePlaybookBuilder.java:262)
	at org.jenkinsci.plugins.ansible.workflow.AnsiblePlaybookStep$AnsiblePlaybookExecution.run(AnsiblePlaybookStep.java:430)
	at org.jenkinsci.plugins.ansible.workflow.AnsiblePlaybookStep$AnsiblePlaybookExecution.run(AnsiblePlaybookStep.java:351)
	at org.jenkinsci.plugins.workflow.steps.AbstractSynchronousNonBlockingStepExecution$1$1.call(AbstractSynchronousNonBlockingStepExecution.java:47)
	at hudson.security.ACL.impersonate2(ACL.java:449)
	at hudson.security.ACL.impersonate(ACL.java:461)
	at org.jenkinsci.plugins.workflow.steps.AbstractSynchronousNonBlockingStepExecution$1.run(AbstractSynchronousNonBlockingStepExecution.java:44)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
[8mha:////4J0X6G3KOBDovDt8beDHi26UJQ4dfBOl0Kssc7kldtS6AAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIikKgQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGMIGcrt/lO7NyZXKai+AAAA[0m[Pipeline] }
[8mha:////4Fqf/2xwrTCtzmo4JIZ0ry9HbLRm09J0W8tL4o2q/6LfAAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggyaWwcK1uGxhNggghh/idAJJUn8mreQTQzVm6xs2+b93zBOgY4UtDMKhwMxs4w7yZdFssUhqujzCxdWEcYySkmVBbUq9OCgpKCJVUNKw4bhZ2jaFAn2HIr77JxEnVzTqF8Bw616Ud4QMWLOcmQvjAH2N2mPhL+PH8FMHufoG73n2rfMnS0t74AAAA=[0m[Pipeline] // stage
[8mha:////4PFsEReoBuIkKRAL3n19zuqOoEziX7ZMMbRAnB6cxOWbAAAApB+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIREhIFoqK10vACkxjjxLoL9oWk4kV8jT8QEYmKrXammdcbyxRx5OhUY6n1lCqvutC76amBY3sNPKiGL6piShysKu1Qcm1PM5YsFvOyHAuNlaUqcPLkBGvdmIcpgiFXnCVO7qCR+/qOJzI9lcVE+cIYsbn1dWL6df4GMHadIN/uBdnuA5X3ZWC9AAAA[0m[Pipeline] }
[8mha:////4BuvaQ6kNyst9BPARLtGiOVkpqiOISkNPtGNariBjC/NAAAApB+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRokFCVLRWGl5gEmOcWHfBvpBUvIiv8QciIlGx1c4083pjmSKOHJ1qLLWeUuVVF3o3PTVwbK+BB9XwRVVMiYNVpR1Kru1pxpLFYl6WY6GxslQFTp6cYK0b8zBFMOSKs8TJHTRyX9/xRKanspgoXxgjNre+Tky/zt8Axq4T5Nu9INt9AOf1UXy9AAAA[0m[Pipeline] // node
[8mha:////4GzRscnB2WDDi7iNrFuYAiPWpPxKo6KRkwndHvU3EjdcAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRdAhR0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYu06Qb/eCbPcBwew2Nr0AAAA=[0m[Pipeline] End of Pipeline
ERROR: Ansible playbook execution failed
Finished: FAILURE
